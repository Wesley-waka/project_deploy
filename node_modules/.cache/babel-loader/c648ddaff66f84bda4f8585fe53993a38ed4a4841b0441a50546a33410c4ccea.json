{"ast":null,"code":"import _slicedToArray from\"/home/wesley-waka/Development/vs_deployed/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Swal from\"sweetalert2\";import{url}from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext();export default function AuthProvider(_ref){var children=_ref.children;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),change=_useState2[0],setOnChange=_useState2[1];var storedUser=localStorage.getItem(\"user\");var parsedUser=null;try{parsedUser=JSON.parse(storedUser);}catch(error){console.log(\"Error parsing user from localStorage:\",error);}var _useState3=useState(parsedUser||null),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var login=function login(email,password){fetch(\"https://vs-app.herokuapp.com/login\",{method:\"POST\",// mode: 'no-cors',\nheaders:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(function(response){return response.json();}).then(function(data){console.log(data);if(data.student){setOnChange(!change);setUser(data.student);localStorage.setItem(\"user\",JSON.stringify(data.student));localStorage.setItem(\"jwt\",data.jwt);localStorage.setItem(\"email\",data.student.email);sessionStorage.setItem(\"jwtToken\",data.jwt);navigate(\"/student\");}else if(data.admin){setOnChange(!change);setUser(data.admin);localStorage.setItem(\"user\",JSON.stringify(data.admin));localStorage.setItem(\"jwt\",data.jwt);localStorage.setItem(\"email\",data.admin.email);navigate(\"/admin\");}else if(data.educator){setOnChange(!change);setUser(data.educator);localStorage.setItem(\"user\",JSON.stringify(data.educator));localStorage.setItem(\"jwt\",data.jwt);localStorage.setItem(\"email\",data.educator.email);navigate(\"/educator\");}else if(data.error){var Toast=Swal.mixin({toast:true,position:\"top-end\",showConfirmButton:false,timer:3000,timerProgressBar:true,didOpen:function didOpen(toast){toast.addEventListener(\"mouseenter\",Swal.stopTimer);toast.addEventListener(\"mouseleave\",Swal.resumeTimer);}});Toast.fire({icon:\"error\",title:\"Oops...\",text:data.error});}}).catch(function(error){return console.log(\"Login error:\",error);});};var register=function register(name,email,password){fetch(\"https://vs-app.herokuapp.com/signup\",{method:\"POST\",// mode: 'no-cors',\nheaders:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,email:email,password:password})}).then(function(response){return response.json();}).then(function(data){return console.log(data);}).catch(function(error){return console.log(\"Register error:\",error);});};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user,login:login,register:register},children:children});}","map":{"version":3,"names":["createContext","useEffect","useState","useNavigate","Swal","url","jsx","_jsx","AuthContext","AuthProvider","_ref","children","navigate","_useState","_useState2","_slicedToArray","change","setOnChange","storedUser","localStorage","getItem","parsedUser","JSON","parse","error","console","log","_useState3","_useState4","user","setUser","login","email","password","fetch","method","headers","body","stringify","then","response","json","data","student","setItem","jwt","sessionStorage","admin","educator","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","fire","icon","title","text","catch","register","name","Provider","value"],"sources":["/home/wesley-waka/Development/vs_deployed/src/components/Pages/AuthContext.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { url } from \"../utils/constants\";\n\nexport const AuthContext = createContext();\n\nexport default function AuthProvider({ children }) {\n  const navigate = useNavigate();\n\n  const [change, setOnChange] = useState(false);\n\n  let storedUser = localStorage.getItem(\"user\");\n\n  let parsedUser = null;\n\n  try {\n    parsedUser = JSON.parse(storedUser);\n  } catch (error) {\n    console.log(\"Error parsing user from localStorage:\", error);\n  }\n\n  const [user, setUser] = useState(parsedUser || null);\n\n  const login = (email, password) => {\n    fetch(\"https://vs-app.herokuapp.com/login\", {\n      method: \"POST\",\n      // mode: 'no-cors',\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email,\n        password,\n      }),\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n\n        if (data.student) {\n          setOnChange(!change);\n          setUser(data.student);\n\n          localStorage.setItem(\"user\", JSON.stringify(data.student));\n          localStorage.setItem(\"jwt\", data.jwt);\n          localStorage.setItem(\"email\", data.student.email);\n\n          sessionStorage.setItem(\"jwtToken\", data.jwt);\n          navigate(\"/student\");\n        } else if (data.admin) {\n          setOnChange(!change);\n          setUser(data.admin);\n\n          localStorage.setItem(\"user\", JSON.stringify(data.admin));\n          localStorage.setItem(\"jwt\", data.jwt);\n          localStorage.setItem(\"email\", data.admin.email);\n\n          navigate(\"/admin\");\n        } else if (data.educator) {\n          setOnChange(!change);\n          setUser(data.educator);\n\n          localStorage.setItem(\"user\", JSON.stringify(data.educator));\n          localStorage.setItem(\"jwt\", data.jwt);\n          localStorage.setItem(\"email\", data.educator.email);\n\n          navigate(\"/educator\");\n        } else if (data.error) {\n          const Toast = Swal.mixin({\n            toast: true,\n            position: \"top-end\",\n            showConfirmButton: false,\n            timer: 3000,\n            timerProgressBar: true,\n            didOpen: (toast) => {\n              toast.addEventListener(\"mouseenter\", Swal.stopTimer);\n              toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n            },\n          });\n          Toast.fire({\n            icon: \"error\",\n            title: \"Oops...\",\n            text: data.error,\n          });\n        }\n      })\n      .catch((error) => console.log(\"Login error:\", error));\n  };\n\n  const register = (name, email, password) => {\n    fetch(\"https://vs-app.herokuapp.com/signup\", {\n      method: \"POST\",\n      // mode: 'no-cors',\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password,\n      }),\n    })\n      .then((response) => response.json())\n      .then((data) => console.log(data))\n      .catch((error) => console.log(\"Register error:\", error));\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, register }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}